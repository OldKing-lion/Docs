# Git 命令

### 一、 Git Commit

> 提交代码，每次提交都会有一次提交记录

### 二、Git Branch

> 创建分支

### 三、Git Checkout

> 迁出分支 新建并迁出到新分支 git checkout -b newbranch

### 四、Git Merge

> 合并分支，Merge 在 Git 中合并两个分支时会产生一个特殊的提交记录，它有两个父节点。

> 把分支 B 合并到分支 A,git checkout A，git merge B

### 五、Git Rebase

- 一般 Rebase

  - > Rebase 实际上就是取出一系列的提交记录，“复制”它们，然后在另外一个地方逐个的放下去。
  - > Rebase 的优势就是可以创造更线性的提交历史，这听上去有些难以理解。如果只允许使用 Rebase 的话，代码库的提交历史将会变得异常清晰。
  - > 把分支 B 合并到分支 A 上，切换到分支 B,git rebase A

- 交互式 Rebase

  - 如果你想从一系列的提交记录中找到想要的记录, 这就是最好的方法了
  - 交互式 rebase 指的是使用带参数 --interactive 的 rebase 命令, 简写为 -i
  - 如果你在命令后增加了这个选项, Git 会打开一个 UI 界面并列出将要被复制到目标分支的备选提交记录，它还会显示每个提交记录的哈希值和提交说明，提交说明有助于你理解这个提交进行了哪些更改。
  - 当 rebase UI 界面打开时, 你能做 3 件事:

    - 调整提交记录的顺序（通过鼠标拖放来完成）
    - 删除你不想要的提交（通过切换 pick 的状态来完成，关闭就意味着你不想要这个提交记录）
    - 合并提交。

### 六、 HEAD

> HEAD 是一个对当前检出记录的符号引用 —— 也就是指向你正在其基础上进行工作的提交记录。

> HEAD 总是指向当前分支上最近一次提交记录。大多数修改提交树的 Git 命令都是从改变 HEAD 的指向开始的。

> HEAD 通常情况下是指向分支名的（如 bugFix）。在你提交时，改变了 bugFix 的状态，这一变化通过 HEAD 变得可见。

> 分离的 HEAD 就是让其指向了某个具体的提交记录而不是分支名。

> 从分支分离 Head 指向记录 git checkout 记录
> 分离 Head 指向到提交记录，提交记录 Id 是 Hash，比较长，可以查看到记录 Id，只用 Hash 的前几位就可以指向记录。
> fed2da64c0efc5293610bdd892f82a58e8cbc5d8 只需要使用 fed2 就可以

### 七、相对引用

> 通过哈希值指定提交记录很不方便，所以 Git 引入了相对引用

1. 使用 ^ 向上移动 1 个提交记录
   - 把[^]这个符号加在引用名称的后面，表示让 Git 寻找指定提交记录的父提
   - main^ 相当于“main 的父节点” main^^ 是 main 的第二个父节点
   - git checkout main^
2. 使用 ~`<num>` 向上移动多个提交记录，如 ~3
   - 该操作符后面可以跟一个数字（可选，不跟数字时与 ^ 相同，向上移动一次），指定向上移动多少次。
   - 可以直接使用 -f 选项让分支指向另一个提交。
   - git branch -f main HEAD~3

### 八、撤销变更

> git reset

- 只变更本地分支，对远程分支无效

> git revert

- 新增一条还原记录，并且推送到远程分支

### 九、Git Cherry Pick

> 整理提交记录

> git cherry-pick <提交号>...
> 要在心里牢记 cherry-pick 可以将提交树上任何地方的提交记录取过来追加到 HEAD 上（只要不是 HEAD 上游的提交就没问题）。
